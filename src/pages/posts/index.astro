---
import MainLayout from '../../layouts/MainLayout.astro';
import PostsList from '../../components/PostsList.astro';
import '@/styles/global.css';

// Get all posts and sort by date
const posts = await Astro.glob('../posts/*.{md,mdx}');
const sortedPosts = posts
  .filter(post => !post.frontmatter.draft)
  .sort((a, b) => 
    new Date(b.frontmatter.pubDate).getTime() - 
    new Date(a.frontmatter.pubDate).getTime()
  )
  .map(post => ({
    title: post.frontmatter.title,
    url: post.url,
    description: post.frontmatter.description,
    pubDate: new Date(post.frontmatter.pubDate),
    draft: post.frontmatter.draft,
    tags: post.frontmatter.tags || [],
    readingTime: post.frontmatter.readingTime
  }));
---

<MainLayout title="Blog | holmdahl.io" description="Articles and thoughts">
  <div class="container mx-auto py-4">
    <h1 class="text-4xl font-bold">Posts</h1>
  </div>

  <div class="container mx-auto">
    <PostsList posts={sortedPosts} />
  </div>
</MainLayout> 